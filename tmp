import numpy as np
import matplotlib.pyplot as plt
from matplotlib.widgets import Cursor

# Define the vector field F = (P, Q)
def vector_field(x, y):
    P = -y
    Q = x
    return P, Q

# Calculate the divergence of the vector field at point (x, y)
def divergence(x, y):
    # Placeholder calculation, replace with your formula
    return x + y

# Calculate the curl of the vector field at point (x, y)
def curl(x, y):
    # Placeholder calculation, replace with your formula
    return x - y

def onclick(event):
    if event.inaxes is not None:
        x, y = event.xdata, event.ydata
        div = divergence(x, y)
        c = curl(x, y)
        print(f"Selected Point: ({x:.2f}, {y:.2f})")
        print(f"Divergence at ({x:.2f}, {y:.2f}): {div:.2f}")
        print(f"Curl at ({x:.2f}, {y:.2f}): {c:.2f}")
        plt.title(f'Divergence at ({x:.2f}, {y:.2f}): {div:.2f}')
        plt.quiver(x, y, c, 0, angles='xy', scale_units='xy', scale=1, color='r', label='Curl', pivot='tail')

# Create a grid of points in the x-y plane
x = np.linspace(-2, 2, 10)
y = np.linspace(-2, 2, 10)
X, Y = np.meshgrid(x, y)

# Calculate the vector field values at each point in the grid
U, V = vector_field(X, Y)

# Create a quiver plot to visualize the vector field
plt.figure(figsize=(8, 6))
plt.quiver(X, Y, U, V, angles='xy', scale_units='xy', scale=1, color='b', label='Vector Field')

# Set labels and title for the plot
plt.xlabel('X')
plt.ylabel('Y')
plt.title('Vector Field Visualization')

# Add a legend to identify the vectors
plt.legend()

# Add cursor to the plot
cursor = Cursor(plt.gca(), useblit=True, color='red', linewidth=1)

# Register the onclick event
plt.gcf().canvas.mpl_connect('button_press_event', onclick)

# Show the plot
plt.grid()
plt.show()
